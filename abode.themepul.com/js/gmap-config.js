$(function(){var t,e="black brown green purple yellow grey orange white".split(" ");$("#gmap").gmap3({center:[46.578498,2.457275],zoom:4}).then(function(n){!function n(l){var o,c,a=l.getBounds();if(!a)return void google.maps.event.addListenerOnce(l,"idle",function(){n(l)});o=a.getNorthEast();c=a.getSouthWest();!function(n,l,o,c){var a,i,r,s,g=[],u=o-n,h=c-l;for(a=0;a<100;a++)i=n+u*Math.random(),r=l+h*Math.random(),s=e[a%e.length],g.push({position:[i,r],icon:"http://maps.google.com/mapfiles/marker_"+s+".png",_tag:s});$("#gmap").gmap3().cluster({size:150,markers:g,cb:function(t){if(t.length>1)return t.length<20?{content:"<div class='cluster cluster-1'>"+t.length+"</div>",x:-26,y:-26}:t.length<50?{content:"<div class='cluster cluster-2'>"+t.length+"</div>",x:-26,y:-26}:{content:"<div class='cluster cluster-3'>"+t.length+"</div>",x:-33,y:-33}}}).then(function(e){t=e})}(o.lat(),c.lng(),c.lat(),o.lng())}(n)}),$("#onOff").change(function(){$(this).is(":checked")?t.enable():t.disable()})});